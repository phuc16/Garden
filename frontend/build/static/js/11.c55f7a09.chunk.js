(window["webpackJsonpconnect-plus-react"]=window["webpackJsonpconnect-plus-react"]||[]).push([[11],{389:function(e,t,a){"use strict";a.r(t);var r=a(38),s=a(134),l=a.n(s),i=a(135),n=a(11),c=a(12),o=a(14),d=a(13),m=a(15),h=a(0),u=a.n(h),p=a(136),b=a(131),g=a.n(b),E=a(123),v=a(122),y=a(140),f=a(10),A=a(143),N=a.n(A),x=a(132),w=a.n(x),D=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(d.a)(t).call(this,e))).data={labels:[],datasets:[{label:"Today Humidity",data:[],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1,fill:!0}]},a.options={scales:{yAxes:[{ticks:{beginAtZero:!0}}]},legend:{display:!0},elements:{point:{radius:0}}},a.state={allAir:[],todayAir:[],lastData:0},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(l.a.mark((function e(){var t,a,r,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,a=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+(t.getDate()+1),e.next=5,w.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"/demo/connect-plus-react-free/template/demo_1/preview"}).REACT_APP_SERVER+"/data").then((function(e){for(var t=[],a=0;a<e.data.length;a++)"Humidity"==e.data[a].category&&t.push(e.data[a]);s.setState({allAir:t})}));case 5:return console.log("x"),e.next=8,w.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"/demo/connect-plus-react-free/template/demo_1/preview"}).REACT_APP_SERVER+"/data/last").then((function(e){for(var t=0,a=0;a<e.data.length;a++)"Humidity"==e.data[a].category&&(t=e.data[a].value);console.log(t),s.setState({lastData:t})}));case 8:return e.next=10,w.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"/demo/connect-plus-react-free/template/demo_1/preview"}).REACT_APP_SERVER+"/data/search?idGarden=1&startDay=".concat(a,"&endDay=").concat(r)).then((function(e){for(var t=[],a=0;a<e.data.length;a++)"Humidity"==e.data[a].category&&t.push(e.data[a]);s.setState({todayAir:t})}));case 10:return e.next=12,w.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"/demo/connect-plus-react-free/template/demo_1/preview"}).REACT_APP_SERVER+"/data/before-last").then((function(e){var t=e.data;s.setState({nearestData:t.Humidity})}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"showChart",value:function(){for(var e=[],t=[],a=[],r=[],s=0;s<this.state.todayAir.length;s++)e.push(this.state.todayAir[s].value),t.push(this.state.todayAir[s].time.slice(11,this.state.todayAir[s].time.length).replace(".000Z",""));for(var l=0;l<this.state.allAir.length;l++)a.push(this.state.allAir[l].value),r.push(this.state.allAir[l].time.slice(0,11).replace("T",""));this.data.labels=t,this.data.datasets[0].data=e,console.log(t)}},{key:"render",value:function(){console.log("render");var e=0,t="",a="",s=new Date,l=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate(),i=[this.state.lastData-this.state.nearestData];this.showChart();for(var n=0;n<this.state.allAir.length;n++)e+=this.state.allAir[n].value;if(this.state.todayAir.length>0){var c=[];c.push.apply(c,Object(r.a)(this.state.todayAir.map((function(e){return e.value})))),t=(t=this.state.todayAir[c.indexOf(Math.max.apply(Math,Object(r.a)(this.state.todayAir.map((function(e){return e.value})))))].time).replace("T",", ").replace(".000Z",""),a=(a=this.state.todayAir[c.indexOf(Math.min.apply(Math,Object(r.a)(this.state.todayAir.map((function(e){return e.value})))))].time).replace("T",", ").replace(".000Z","")}console.log(this.state.lastData);var o=[{id:"Max",air:this.state.todayAir.length>0?Math.max.apply(Math,Object(r.a)(this.state.todayAir.map((function(e){return e.value})))):"No data",time:t},{id:"Min",air:this.state.todayAir.length>0?Math.min.apply(Math,Object(r.a)(this.state.todayAir.map((function(e){return e.value})))):"No data",time:a},{id:"Avarage",air:this.state.todayAir.length>0?Math.round(e/this.state.todayAir.length*100)/100:"No data",time:l}],d=[{dataField:"id",text:"ID",sort:!0},{dataField:"value",text:"Value",sort:!0},{dataField:"time",text:"Time",sort:!0}];return u.a.createElement("div",null,u.a.createElement("div",{className:"page-header"},u.a.createElement("h3",{className:"page-title"},"Air"),u.a.createElement("nav",{"aria-label":"breadcrumb"},u.a.createElement("ol",{className:"breadcrumb"},u.a.createElement("li",{className:"breadcrumb-item"},u.a.createElement(f.b,{to:"/dashboard"},"Device Control Center")),u.a.createElement("li",{className:"breadcrumb-item active","aria-current":"page"},"Air")))),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-xl-3 col-lg-6 col-sm-6 grid-margin stretch-card"},u.a.createElement("div",{className:"card"},u.a.createElement("div",{className:"card-body text-center"},u.a.createElement("h5",{className:"mb-2 text-dark font-weight-normal"},"Air"),u.a.createElement("h2",{className:"mb-4 text-dark font-weight-bold"},this.state.lastData),u.a.createElement("div",{className:"px-4 d-flex align-items-center"},u.a.createElement("svg",{width:"0",height:"0"},u.a.createElement("defs",null,u.a.createElement("linearGradient",{id:"progress-visitors",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},u.a.createElement("stop",{offset:"0%",stopColor:"#b4ec51"}),u.a.createElement("stop",{offset:"100%",stopColor:"#429321"})))),u.a.createElement(p.a,{className:"progress-visitors",value:this.state.lastData},u.a.createElement("div",null,u.a.createElement("i",{className:"mdi mdi-weather-rainy icon-md absolute-center text-dark"})))),u.a.createElement("p",{className:"mt-4 mb-0"},i>=0?"Increased since":"Decreased since"," last time"),u.a.createElement("h3",{className:"mb-0 font-weight-bold mt-2 text-dark"},Math.floor(Math.abs(i)/this.state.nearestData*100)," %")))),u.a.createElement("div",{className:"col-xl-9 col-lg-6 col-sm-6 grid-margin stretch-card"},u.a.createElement("div",{className:"card"},u.a.createElement("div",{className:"card-body text-center"},u.a.createElement("h5",{className:"mb-2 text-dark font-weight-normal"},"Air Overview"),u.a.createElement(g.a,{bootstrap4:!0,keyField:"id",data:o,columns:[{dataField:"id",text:"",sort:!0},{dataField:"air",text:"Air",sort:!0},{dataField:"time",text:"Time",sort:!0}]}))))),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"col-md-12"},u.a.createElement("div",{className:"justify-content-between align-items-center tab-transparent"},u.a.createElement(E.a,{defaultActiveKey:"chart",id:"uncontrolled-tab-example",className:"mb-3"},u.a.createElement(v.a,{eventKey:"chart",title:"Chart"},u.a.createElement("div",{className:"card"},u.a.createElement("div",{className:"card-body"},u.a.createElement("h4",{className:"card-title"},"Air Chart"),u.a.createElement(y.a,{data:this.data,options:this.options})))),u.a.createElement(v.a,{eventKey:"today",title:"Today"},u.a.createElement("div",{className:"card"},u.a.createElement("div",{className:"card-body text-center"},u.a.createElement("h5",{className:"mb-2 text-dark font-weight-normal"},"Air Stats Today"),u.a.createElement(g.a,{bootstrap4:!0,keyField:"id",data:this.state.todayAir,columns:d})))),u.a.createElement(v.a,{eventKey:"data",title:"Data"},u.a.createElement("div",{className:"card"},u.a.createElement("div",{className:"card-body text-center"},u.a.createElement("h5",{className:"mb-2 text-dark font-weight-normal"},"Air Stats"),u.a.createElement(g.a,{bootstrap4:!0,keyField:"id",data:this.state.allAir,columns:d,pagination:N()({sizePerPage:5})})))))))))}}]),t}(h.Component);t.default=D}}]);
//# sourceMappingURL=11.c55f7a09.chunk.js.map