(window["webpackJsonpconnect-plus-react"]=window["webpackJsonpconnect-plus-react"]||[]).push([[13],{390:function(t,e,a){"use strict";a.r(e);var r=a(38),s=a(134),n=a.n(s),l=a(135),i=a(11),c=a(12),o=a(14),d=a(13),h=a(15),m=a(0),g=a.n(m),u=a(136),p=a(131),b=a.n(p),y=a(123),v=a(122),f=a(141),E=a(10),L=a(138),N=a.n(L),x=a(132),w=a.n(x),k=function(t){function e(t){var a;return Object(i.a)(this,e),(a=Object(o.a)(this,Object(d.a)(e).call(this,t))).data={labels:[],datasets:[{label:"Today Light Intensity",data:[],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1,fill:!0}]},a.options={scales:{yAxes:[{ticks:{beginAtZero:!0}}]},legend:{display:!0},elements:{point:{radius:0}}},a.state={allLight:[],todayLight:[],lastData:0},a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=Object(l.a)(n.a.mark((function t(){var e,a,r,s=this;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Date,a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),r=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+(e.getDate()+1),t.next=5,w.a.get("https://universe-smart-garden.herokuapp.com/data").then((function(t){for(var e=[],a=0;a<t.data.length;a++)"Light"==t.data[a].category&&e.push(t.data[a]);s.setState({allLight:e})}));case 5:return t.next=7,w.a.get("https://universe-smart-garden.herokuapp.com/data/last").then((function(t){for(var e=0,a=0;a<t.data.length;a++)"Light"==t.data[a].category&&(e=t.data[a].value);console.log(e),s.setState({lastData:e})}));case 7:return t.next=9,w.a.get("https://universe-smart-garden.herokuapp.com"+"/data/search?idGarden=1&startDay=".concat(a,"&endDay=").concat(r)).then((function(t){for(var e=[],a=0;a<t.data.length;a++)"Light"==t.data[a].category&&e.push(t.data[a]);s.setState({todayLight:e})}));case 9:return t.next=11,w.a.get("https://universe-smart-garden.herokuapp.com/data/before-last").then((function(t){var e=t.data;s.setState({nearestData:e.Light})}));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"showChart",value:function(){for(var t=[],e=[],a=[],r=[],s=0;s<this.state.todayLight.length;s++)t.push(this.state.todayLight[s].value),e.push(this.state.todayLight[s].time.slice(11,this.state.todayLight[s].time.length).replace(".000Z",""));for(var n=0;n<this.state.todayLight.length;n++)a.push(this.state.todayLight[n].value),r.push(this.state.todayLight[n].time.slice(0,11).replace("T",""));this.data.labels=e,this.data.datasets[0].data=t,console.log(e)}},{key:"render",value:function(){console.log("render");var t=0,e="",a="",s=new Date,n=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate(),l=[this.state.lastData-this.state.nearestData];this.showChart();for(var i=0;i<this.state.todayLight.length;i++)t+=this.state.todayLight[i].value;if(this.state.todayLight.length>0){var c=[];c.push.apply(c,Object(r.a)(this.state.todayLight.map((function(t){return t.value})))),e=(e=this.state.todayLight[c.indexOf(Math.max.apply(Math,Object(r.a)(this.state.todayLight.map((function(t){return t.value})))))].time).replace("T",", ").replace(".000Z",""),a=(a=this.state.todayLight[c.indexOf(Math.min.apply(Math,Object(r.a)(this.state.todayLight.map((function(t){return t.value})))))].time).replace("T",", ").replace(".000Z","")}var o=[{id:"Max",light:this.state.todayLight.length>0?Math.max.apply(Math,Object(r.a)(this.state.todayLight.map((function(t){return t.value})))):"No data",time:e},{id:"Min",light:this.state.todayLight.length>0?Math.min.apply(Math,Object(r.a)(this.state.todayLight.map((function(t){return t.value})))):"No data",time:a},{id:"Avarage",light:this.state.todayLight.length>0?Math.round(t/this.state.todayLight.length*100)/100:"No data",time:n}],d=[{dataField:"id",text:"ID",sort:!0},{dataField:"value",text:"Value",sort:!0},{dataField:"time",text:"Time",sort:!0}];return g.a.createElement("div",null,g.a.createElement("div",{className:"page-header"},g.a.createElement("h3",{className:"page-title"},"Light Intensity"),g.a.createElement("nav",{"aria-label":"breadcrumb"},g.a.createElement("ol",{className:"breadcrumb"},g.a.createElement("li",{className:"breadcrumb-item"},g.a.createElement(E.b,{to:"/dashboard"},"Device Control Center")),g.a.createElement("li",{className:"breadcrumb-item active","aria-current":"page"},"Light")))),g.a.createElement("div",{className:"row"},g.a.createElement("div",{className:"col-xl-3 col-lg-6 col-sm-6 grid-margin stretch-card"},g.a.createElement("div",{className:"card"},g.a.createElement("div",{className:"card-body text-center"},g.a.createElement("h5",{className:"mb-2 text-dark font-weight-normal"},"Light intensity"),g.a.createElement("h2",{className:"mb-4 text-dark font-weight-bold"},this.state.lastData),g.a.createElement("div",{className:"px-4 d-flex align-items-center"},g.a.createElement("svg",{width:"0",height:"0"},g.a.createElement("defs",null,g.a.createElement("linearGradient",{id:"progress-followers",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},g.a.createElement("stop",{offset:"0%",stopColor:"#f5515f"}),g.a.createElement("stop",{offset:"100%",stopColor:"#9f041b"})))),g.a.createElement(u.a,{className:"progress-followers",value:this.state.lastData/10},g.a.createElement("div",null,g.a.createElement("i",{className:"mdi mdi-weather-sunny icon-md absolute-center text-dark"})))),g.a.createElement("p",{className:"mt-4 mb-0"},l>=0?"Increased since":"Decreased since"," last time"),g.a.createElement("h3",{className:"mb-0 font-weight-bold mt-2 text-dark"},Math.floor(Math.abs(l)/this.state.nearestData*100)," %")))),g.a.createElement("div",{className:"col-xl-9 col-lg-6 col-sm-6 grid-margin stretch-card"},g.a.createElement("div",{className:"card"},g.a.createElement("div",{className:"card-body text-center"},g.a.createElement("h5",{className:"mb-2 text-dark font-weight-normal"},"Light Intensity Overview"),g.a.createElement(b.a,{bootstrap4:!0,keyField:"id",data:o,columns:[{dataField:"id",text:"",sort:!0},{dataField:"light",text:"Light",sort:!0},{dataField:"time",text:"Time",sort:!0}]}))))),g.a.createElement("div",{className:"row"},g.a.createElement("div",{className:"col-md-12"},g.a.createElement("div",{className:"justify-content-between align-items-center tab-transparent"},g.a.createElement(y.a,{defaultActiveKey:"chart",id:"uncontrolled-tab-example",className:"mb-3"},g.a.createElement(v.a,{eventKey:"chart",title:"Chart"},g.a.createElement("div",{className:"card"},g.a.createElement("div",{className:"card-body"},g.a.createElement("h4",{className:"card-title"},"Light Intensity Chart"),g.a.createElement(f.a,{data:this.data,options:this.options})))),g.a.createElement(v.a,{eventKey:"today",title:"Today"},g.a.createElement("div",{className:"card"},g.a.createElement("div",{className:"card-body text-center"},g.a.createElement("h5",{className:"mb-2 text-dark font-weight-normal"},"Light Intensity Stats Today"),g.a.createElement(b.a,{bootstrap4:!0,keyField:"id",data:this.state.todayLight,columns:d})))),g.a.createElement(v.a,{eventKey:"data",title:"Data"},g.a.createElement("div",{className:"card"},g.a.createElement("div",{className:"card-body text-center"},g.a.createElement("h5",{className:"mb-2 text-dark font-weight-normal"},"Light Intensity Stats"),g.a.createElement(b.a,{bootstrap4:!0,keyField:"id",data:this.state.allLight,columns:d,pagination:N()({sizePerPage:5})})))))))))}}]),e}(m.Component);e.default=k}}]);
//# sourceMappingURL=13.c6ca02f2.chunk.js.map