(window["webpackJsonpconnect-plus-react"]=window["webpackJsonpconnect-plus-react"]||[]).push([[14],{388:function(e,t,a){"use strict";a.r(t);var r=a(38),s=a(134),l=a.n(s),n=a(135),c=a(11),m=a(12),o=a(14),i=a(13),d=a(15),p=a(0),h=a.n(p),u=a(136),b=a(131),g=a.n(b),E=a(123),v=a(122),y=a(140),f=a(10),T=a(143),N=a.n(T),x=a(132),w=a.n(x),D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(i.a)(t).call(this,e))).data={labels:[],datasets:[{label:"Today Temporature",data:[],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1,fill:!0}]},a.options={scales:{yAxes:[{ticks:{beginAtZero:!0}}]},legend:{display:!0},elements:{point:{radius:0}}},a.state={allTemp:[],todayTemp:[],lastData:0},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(n.a)(l.a.mark((function e(){var t,a,r,s=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,a=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+(t.getDate()+1),e.next=5,w.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"/demo/connect-plus-react-free/template/demo_1/preview"}).REACT_APP_SERVER+"/data").then((function(e){for(var t=[],a=0;a<e.data.length;a++)"Temp"==e.data[a].category&&t.push(e.data[a]);s.setState({allTemp:t})}));case 5:return console.log("x"),e.next=8,w.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"/demo/connect-plus-react-free/template/demo_1/preview"}).REACT_APP_SERVER+"/data/last").then((function(e){for(var t=0,a=0;a<e.data.length;a++)"Temp"==e.data[a].category&&(t=e.data[a].value);console.log(t),s.setState({lastData:t})}));case 8:return e.next=10,w.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"/demo/connect-plus-react-free/template/demo_1/preview"}).REACT_APP_SERVER+"/data/search?idGarden=1&startDay=".concat(a,"&endDay=").concat(r)).then((function(e){for(var t=[],a=0;a<e.data.length;a++)"Temp"==e.data[a].category&&t.push(e.data[a]);s.setState({todayTemp:t})}));case 10:return e.next=12,w.a.get(Object({NODE_ENV:"production",PUBLIC_URL:"/demo/connect-plus-react-free/template/demo_1/preview"}).REACT_APP_SERVER+"/data/before-last").then((function(e){var t=e.data;s.setState({nearestData:t.Temp})}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"showChart",value:function(){for(var e=[],t=[],a=[],r=[],s=0;s<this.state.todayTemp.length;s++)e.push(this.state.todayTemp[s].value),t.push(this.state.todayTemp[s].time.slice(11,this.state.todayTemp[s].time.length).replace(".000Z",""));for(var l=0;l<this.state.allTemp.length;l++)a.push(this.state.allTemp[l].value),r.push(this.state.allTemp[l].time.slice(0,11).replace("T",""));this.data.labels=t,this.data.datasets[0].data=e,console.log(t)}},{key:"render",value:function(){console.log("render");var e=0,t="",a="",s=new Date,l=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate(),n=[this.state.lastData-this.state.nearestData];this.showChart();for(var c=0;c<this.state.allTemp.length;c++)e+=this.state.allTemp[c].value;if(this.state.todayTemp.length>0){var m=[];m.push.apply(m,Object(r.a)(this.state.todayTemp.map((function(e){return e.value})))),t=(t=this.state.todayTemp[m.indexOf(Math.max.apply(Math,Object(r.a)(this.state.todayTemp.map((function(e){return e.value})))))].time).replace("T",", ").replace(".000Z",""),a=(a=this.state.todayTemp[m.indexOf(Math.min.apply(Math,Object(r.a)(this.state.todayTemp.map((function(e){return e.value})))))].time).replace("T",", ").replace(".000Z","")}var o=[{id:"Max",temp:this.state.todayTemp.length>0?Math.max.apply(Math,Object(r.a)(this.state.todayTemp.map((function(e){return e.value})))):"No data",time:t},{id:"Min",temp:this.state.todayTemp.length>0?Math.min.apply(Math,Object(r.a)(this.state.todayTemp.map((function(e){return e.value})))):"No data",time:a},{id:"Avarage",temp:this.state.todayTemp.length>0?Math.round(e/this.state.todayTemp.length*100)/100:"No data",time:l}],i=[{dataField:"id",text:"ID",sort:!0},{dataField:"value",text:"Value",sort:!0},{dataField:"time",text:"Time",sort:!0}];return h.a.createElement("div",null,h.a.createElement("div",{className:"page-header"},h.a.createElement("h3",{className:"page-title"},"Temperature"),h.a.createElement("nav",{"aria-label":"breadcrumb"},h.a.createElement("ol",{className:"breadcrumb"},h.a.createElement("li",{className:"breadcrumb-item"},h.a.createElement(f.b,{to:"/dashboard"},"Device Control Center")),h.a.createElement("li",{className:"breadcrumb-item active","aria-current":"page"},"Temperature")))),h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-xl-3 col-lg-6 col-sm-6 grid-margin stretch-card"},h.a.createElement("div",{className:"card"},h.a.createElement("div",{className:"card-body text-center"},h.a.createElement("h5",{className:"mb-2 text-dark font-weight-normal"},"Temperature"),h.a.createElement("h2",{className:"mb-4 text-dark font-weight-bold"},this.state.lastData),h.a.createElement("div",{className:"px-4 d-flex align-items-center"},h.a.createElement("svg",{width:"0",height:"0"},h.a.createElement("defs",null,h.a.createElement("linearGradient",{id:"progress-impressions",x1:"0%",y1:"0%",x2:"100%",y2:"0%"},h.a.createElement("stop",{offset:"0%",stopColor:"#fad961"}),h.a.createElement("stop",{offset:"100%",stopColor:"#f76b1c"})))),h.a.createElement(u.a,{className:"progress-impressions",value:this.state.lastData},h.a.createElement("div",null,h.a.createElement("i",{className:"mdi mdi-coolant-temperature icon-md absolute-center text-dark"})))),h.a.createElement("p",{className:"mt-4 mb-0"},n>=0?"Increased since":"Decreased since"," last time"),h.a.createElement("h3",{className:"mb-0 font-weight-bold mt-2 text-dark"},Math.floor(Math.abs(n)/this.state.nearestData*100)," %")))),h.a.createElement("div",{className:"col-xl-9 col-lg-6 col-sm-6 grid-margin stretch-card"},h.a.createElement("div",{className:"card"},h.a.createElement("div",{className:"card-body text-center"},h.a.createElement("h5",{className:"mb-2 text-dark font-weight-normal"},"Temperature Overview"),h.a.createElement(g.a,{bootstrap4:!0,keyField:"id",data:o,columns:[{dataField:"id",text:"",sort:!0},{dataField:"temp",text:"Temp",sort:!0},{dataField:"time",text:"Time",sort:!0}]}))))),h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col-md-12"},h.a.createElement("div",{className:"justify-content-between align-items-center tab-transparent"},h.a.createElement(E.a,{defaultActiveKey:"chart",id:"uncontrolled-tab-example",className:"mb-3"},h.a.createElement(v.a,{eventKey:"chart",title:"Chart"},h.a.createElement("div",{className:"card"},h.a.createElement("div",{className:"card-body"},h.a.createElement("h4",{className:"card-title"},"Temperature Chart"),h.a.createElement(y.a,{data:this.data,options:this.options})))),h.a.createElement(v.a,{eventKey:"today",title:"Today"},h.a.createElement("div",{className:"card"},h.a.createElement("div",{className:"card-body text-center"},h.a.createElement("h5",{className:"mb-2 text-dark font-weight-normal"},"Temperature Stats Today"),h.a.createElement(g.a,{bootstrap4:!0,keyField:"id",data:this.state.todayTemp,columns:i})))),h.a.createElement(v.a,{eventKey:"data",title:"Data"},h.a.createElement("div",{className:"card"},h.a.createElement("div",{className:"card-body text-center"},h.a.createElement("h5",{className:"mb-2 text-dark font-weight-normal"},"Temperature Stats"),h.a.createElement(g.a,{bootstrap4:!0,keyField:"id",data:this.state.allTemp,columns:i,pagination:N()({sizePerPage:5})})))))))))}}]),t}(p.Component);t.default=D}}]);
//# sourceMappingURL=14.089bce91.chunk.js.map