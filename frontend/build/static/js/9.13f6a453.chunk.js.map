{"version":3,"sources":["../node_modules/react-bootstrap/esm/Button.js","app/control-scheduler/schedule.js"],"names":["Button","forwardRef","_ref","ref","bsPrefix","variant","size","active","className","block","type","as","props","prefix","classes","href","createElement","disabled","Component","displayName","defaultProps","TimeSetting","state","reload","scheduled","settingDevice","axios","get","process","then","res","temp","data","setState","console","log","this","handleDeleteSchedule","e","target","value","delete","deviceInSchedule","catch","err","handleTimeStart","index","parseInt","deviceInSetting","handleTimeEnd","handleSetSchedule","device_id","post","id_device","time_start","time_end","status","slice","window","location","replace","i","length","push","setting","style","backgroundColor","border","color","onClick","onChange","step","defaultActiveKey","id","eventKey","title","bootstrap4","keyField","columns","dataField","text","sort","pagination","paginationFactory","sizePerPage"],"mappings":"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","file":"static/js/9.13f6a453.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport SafeAnchor from './SafeAnchor';\nvar defaultProps = {\n  variant: 'primary',\n  active: false,\n  disabled: false,\n  type: 'button'\n};\nvar Button = React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      variant = _ref.variant,\n      size = _ref.size,\n      active = _ref.active,\n      className = _ref.className,\n      block = _ref.block,\n      type = _ref.type,\n      as = _ref.as,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"variant\", \"size\", \"active\", \"className\", \"block\", \"type\", \"as\"]);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'btn');\n  var classes = classNames(className, prefix, active && 'active', prefix + \"-\" + variant, block && prefix + \"-block\", size && prefix + \"-\" + size);\n\n  if (props.href) {\n    return React.createElement(SafeAnchor, _extends({}, props, {\n      as: as,\n      ref: ref,\n      className: classNames(classes, props.disabled && 'disabled')\n    }));\n  }\n\n  if (ref) {\n    props.ref = ref;\n  }\n\n  if (!as) {\n    props.type = type;\n  }\n\n  var Component = as || 'button';\n  return React.createElement(Component, _extends({}, props, {\n    className: classes\n  }));\n});\nButton.displayName = 'Button';\nButton.defaultProps = defaultProps;\nexport default Button;","import { Tabs, Tab, Button } from \"react-bootstrap\"\r\nimport BootstrapTable from \"react-bootstrap-table-next\"\r\nimport React, { Component } from 'react';\r\nimport './schedule.css'\r\n// import TimePicker from 'react-bootstrap-time-picker';\r\nimport axios from 'axios'\r\nimport paginationFactory from 'react-bootstrap-table2-paginator';\r\n\r\n\r\n\r\nclass TimeSetting extends Component {\r\n    \r\n  constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        reload: false,\r\n        scheduled: [], \r\n        settingDevice: [],\r\n        // time_start: [],\r\n        // time_end: []\r\n      };\r\n    }\r\n\r\n    componentDidMount() {\r\n      axios.get(process.env.REACT_APP_SERVER + `/schedule?startDay=2000-01-01&endDay=2023-01-01`)\r\n        .then(res => {\r\n          const temp = res.data; \r\n          this.setState({ scheduled : temp });\r\n          console.log(this.state.scheduled)\r\n        })\r\n\r\n      axios.get(process.env.REACT_APP_SERVER + `/device`)\r\n        .then(res => {\r\n          const temp = res.data; \r\n          this.setState({ settingDevice : temp });\r\n        })\r\n    }\r\n\r\n    \r\n\r\n    render(){\r\n      console.log(this.state.scheduled)\r\n      const handleDeleteSchedule = (e) => {\r\n        let index = e.target.value\r\n        axios.delete(process.env.REACT_APP_SERVER + `/schedule/${deviceInSchedule[e.target.value]['id']}`)\r\n        .then(res => {\r\n          // this.setState((prevState) => {\r\n          //   console.log(prevState)\r\n          //   return {scheduled: [\r\n          //     ...prevState.scheduled.slice(0, index), \r\n          //     ...prevState.scheduled.slice(index+1)\r\n          //   ]}\r\n          // })\r\n        axios.get(process.env.REACT_APP_SERVER + `/schedule?startDay=2000-01-01&endDay=2023-01-01`)\r\n        .then(res => {\r\n          const temp = res.data; \r\n          this.setState({ scheduled : temp });\r\n        })\r\n\r\n\r\n          \r\n        })\r\n        .catch(err =>{\r\n          console.log(err)\r\n        })\r\n      }\r\n\r\n      const handleTimeStart = e => {\r\n        let index = parseInt(e.target.className)\r\n        console.log(typeof(e.target.value))\r\n        deviceInSetting[index]['time_start'] = e.target.value\r\n      }\r\n\r\n      const handleTimeEnd = e => {\r\n        let index = parseInt(e.target.className)\r\n        deviceInSetting[index]['time_end'] = e.target.value\r\n      }\r\n\r\n      const handleSetSchedule = (e) => {\r\n        let index = e.target.value\r\n        let device_id = deviceInSetting[index]['id']\r\n\r\n        axios.post(process.env.REACT_APP_SERVER + `/schedule`, {\r\n          id_device: device_id,\r\n          time_start: deviceInSetting[index]['time_start'],\r\n          time_end: deviceInSetting[index]['time_end'],\r\n          status: 0\r\n        })\r\n        .then(res => {\r\n          this.setState({ scheduled : [\r\n            ...this.state.scheduled.slice(0, index), \r\n            ...this.state.scheduled.slice(index+1)\r\n          ]})\r\n          window.location.replace('/control-scheduler/schedule')\r\n        })\r\n        \r\n      }\r\n\r\n      const deviceInSchedule = [];\r\n      const deviceInSetting = []\r\n\r\n      for (let i = 0; i < this.state.scheduled.length ; i++){\r\n        deviceInSchedule.push({...this.state.scheduled[i],  \r\n        time_start: this.state.scheduled[i]['time_start'].replace('T', ', ').replace('.000Z', '') ,\r\n        time_end: this.state.scheduled[i]['time_end'] == 'null' ? 'Chưa xác định' : this.state.scheduled[i]['time_end'].replace('T', ', ').replace('.000Z', '') ,\r\n        status: this.state.scheduled[i]['status'] == 0 ? 'Chưa thực thi' \r\n        : (this.state.scheduled[i]['status'] == 1? 'Đang thực hiện' : \r\n        ((this.state.scheduled[i]['status'] == 2? 'Hoàn thành' : \r\n        (this.state.scheduled[i]['status'] == 3? 'Time Out' : 'Task LTT')))), \r\n        setting:  this.state.scheduled[i]['status'] != 2 ?<Button style={{backgroundColor: 'white', border: '1px solid red', color: 'red'}} value={i} onClick={handleDeleteSchedule}>Delete</Button>: '' })\r\n      }\r\n\r\n      for (let i = 0; i < this.state.settingDevice.length ; i++){\r\n          deviceInSetting.push({...this.state.settingDevice[i], \r\n          time_start: <input type=\"datetime-local\" onChange={handleTimeStart} className={i} step={1}></input>, \r\n          time_end: <input type=\"datetime-local\" onChange={handleTimeEnd}  className={i} step={1} ></input>,\r\n          setting:  <Button value={i} onClick={handleSetSchedule}>Set</Button> }) \r\n      }\r\n\r\n      // console.log(this.state.scheduled[0])\r\n    const columns = [{\r\n        dataField: 'id',\r\n        text: 'ID',\r\n        sort: true\r\n      }, {\r\n        dataField: 'id_device',\r\n        text: 'Device ID'\r\n      }, \r\n      {\r\n        dataField: 'time_start',\r\n        text: 'Time Start'\r\n      },\r\n      {\r\n        dataField: 'time_end',\r\n        text: 'Time End'\r\n      },\r\n      {\r\n        dataField: 'status',\r\n        text: 'Status'\r\n      },\r\n      {\r\n        dataField: 'setting',\r\n        text: 'Setting'\r\n      }\r\n      ];\r\n    \r\n    const columns2 = [{\r\n        dataField: 'id',\r\n        text: 'ID'\r\n      }, \r\n      {\r\n        dataField: 'name',\r\n        text: 'Device Name'\r\n      },\r\n      {\r\n        dataField: 'time_start',\r\n        text: 'Time Start'\r\n      },\r\n      {\r\n        dataField: 'time_end',\r\n        text: 'Time End'\r\n      },\r\n      {\r\n        dataField: 'setting',\r\n        text: 'Setting'\r\n      }\r\n      ];\r\n\r\n        return(\r\n            <div>\r\n                <div className='row'>\r\n                    <div className=\"col-md-12\">\r\n                        <div className=\"justify-content-between align-items-center tab-transparent\">\r\n                            <Tabs defaultActiveKey=\"table\" id=\"uncontrolled-tab-example\" className=\"mb-3\">\r\n                            <Tab eventKey=\"table\" title=\"Schedule\">\r\n                            <div className=\"card\">\r\n                            <div className=\"card-body text-center\">\r\n                            <h5 className=\"mb-2 text-dark font-weight-normal\">Device Schedule</h5>\r\n                                <BootstrapTable bootstrap4 keyField='id' data={ deviceInSchedule } columns={ columns } pagination={paginationFactory({ sizePerPage: 5 })} />\r\n                                </div>\r\n                            </div>\r\n                            </Tab>\r\n                            <Tab eventKey=\"setting\" title=\"Setting\" className=\"setting\">\r\n                            <div className=\"card\">\r\n                            <div className=\"card-body text-center\">\r\n                            <h5 className=\"mb-2 text-dark font-weight-normal\">Schedule Setting</h5>\r\n                                <BootstrapTable keyField='id' data={ deviceInSetting } columns={ columns2 } />\r\n                                </div>\r\n                            </div>\r\n\r\n                            </Tab>\r\n                            </Tabs>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default TimeSetting;"],"sourceRoot":""}